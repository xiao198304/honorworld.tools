import{c as _t,J as ht,K,G as ut,L as n,H as E,I as k,M as l,N as L,O as o,P,Q as mt,R as p,S as ot,T as pt,U as gt,V as S,W as ct,X as Y,Y as yt}from"./index.058d235a.js";import{M as lt,p as dt}from"./nftdata.b204cf17.js";var ft={exports:{}};(function(N,U){(function(q,M){N.exports=M()})(_t,function(){var q=1e3,M=6e4,A=36e5,D="millisecond",g="second",y="minute",T="hour",O="day",B="week",I="month",nt="quarter",W="year",j="date",c="Invalid Date",G=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,J=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var s=["th","st","nd","rd"],t=a%100;return"["+a+(s[(t-20)%10]||s[t]||s[0])+"]"}},b=function(a,s,t){var r=String(a);return!r||r.length>=s?a:""+Array(s+1-r.length).join(t)+a},h={s:b,z:function(a){var s=-a.utcOffset(),t=Math.abs(s),r=Math.floor(t/60),e=t%60;return(s<=0?"+":"-")+b(r,2,"0")+":"+b(e,2,"0")},m:function a(s,t){if(s.date()<t.date())return-a(t,s);var r=12*(t.year()-s.year())+(t.month()-s.month()),e=s.clone().add(r,I),u=t-e<0,i=s.clone().add(r+(u?-1:1),I);return+(-(r+(t-e)/(u?e-i:i-e))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:I,y:W,w:B,d:O,D:j,h:T,m:y,s:g,ms:D,Q:nt}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},v="en",C={};C[v]=d;var m=function(a){return a instanceof R},Q=function a(s,t,r){var e;if(!s)return v;if(typeof s=="string"){var u=s.toLowerCase();C[u]&&(e=u),t&&(C[u]=t,e=u);var i=s.split("-");if(!e&&i.length>1)return a(i[0])}else{var _=s.name;C[_]=s,e=_}return!r&&e&&(v=e),e||!r&&v},w=function(a,s){if(m(a))return a.clone();var t=typeof s=="object"?s:{};return t.date=a,t.args=arguments,new R(t)},f=h;f.l=Q,f.i=m,f.w=function(a,s){return w(a,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var R=function(){function a(t){this.$L=Q(t.locale,null,!0),this.parse(t)}var s=a.prototype;return s.parse=function(t){this.$d=function(r){var e=r.date,u=r.utc;if(e===null)return new Date(NaN);if(f.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var i=e.match(G);if(i){var _=i[2]-1||0,$=(i[7]||"0").substring(0,3);return u?new Date(Date.UTC(i[1],_,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)):new Date(i[1],_,i[3]||1,i[4]||0,i[5]||0,i[6]||0,$)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return f},s.isValid=function(){return this.$d.toString()!==c},s.isSame=function(t,r){var e=w(t);return this.startOf(r)<=e&&e<=this.endOf(r)},s.isAfter=function(t,r){return w(t)<this.startOf(r)},s.isBefore=function(t,r){return this.endOf(r)<w(t)},s.$g=function(t,r,e){return f.u(t)?this[r]:this.set(e,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,r){var e=this,u=!!f.u(r)||r,i=f.p(t),_=function(tt,F){var z=f.w(e.$u?Date.UTC(e.$y,F,tt):new Date(e.$y,F,tt),e);return u?z:z.endOf(O)},$=function(tt,F){return f.w(e.toDate()[tt].apply(e.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(F)),e)},x=this.$W,H=this.$M,Z=this.$D,V="set"+(this.$u?"UTC":"");switch(i){case W:return u?_(1,0):_(31,11);case I:return u?_(1,H):_(0,H+1);case B:var et=this.$locale().weekStart||0,st=(x<et?x+7:x)-et;return _(u?Z-st:Z+(6-st),H);case O:case j:return $(V+"Hours",0);case T:return $(V+"Minutes",1);case y:return $(V+"Seconds",2);case g:return $(V+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,r){var e,u=f.p(t),i="set"+(this.$u?"UTC":""),_=(e={},e[O]=i+"Date",e[j]=i+"Date",e[I]=i+"Month",e[W]=i+"FullYear",e[T]=i+"Hours",e[y]=i+"Minutes",e[g]=i+"Seconds",e[D]=i+"Milliseconds",e)[u],$=u===O?this.$D+(r-this.$W):r;if(u===I||u===W){var x=this.clone().set(j,1);x.$d[_]($),x.init(),this.$d=x.set(j,Math.min(this.$D,x.daysInMonth())).$d}else _&&this.$d[_]($);return this.init(),this},s.set=function(t,r){return this.clone().$set(t,r)},s.get=function(t){return this[f.p(t)]()},s.add=function(t,r){var e,u=this;t=Number(t);var i=f.p(r),_=function(H){var Z=w(u);return f.w(Z.date(Z.date()+Math.round(H*t)),u)};if(i===I)return this.set(I,this.$M+t);if(i===W)return this.set(W,this.$y+t);if(i===O)return _(1);if(i===B)return _(7);var $=(e={},e[y]=M,e[T]=A,e[g]=q,e)[i]||1,x=this.$d.getTime()+t*$;return f.w(x,this)},s.subtract=function(t,r){return this.add(-1*t,r)},s.format=function(t){var r=this,e=this.$locale();if(!this.isValid())return e.invalidDate||c;var u=t||"YYYY-MM-DDTHH:mm:ssZ",i=f.z(this),_=this.$H,$=this.$m,x=this.$M,H=e.weekdays,Z=e.months,V=function(F,z,rt,at){return F&&(F[z]||F(r,u))||rt[z].slice(0,at)},et=function(F){return f.s(_%12||12,F,"0")},st=e.meridiem||function(F,z,rt){var at=F<12?"AM":"PM";return rt?at.toLowerCase():at},tt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:x+1,MM:f.s(x+1,2,"0"),MMM:V(e.monthsShort,x,Z,3),MMMM:V(Z,x),D:this.$D,DD:f.s(this.$D,2,"0"),d:String(this.$W),dd:V(e.weekdaysMin,this.$W,H,2),ddd:V(e.weekdaysShort,this.$W,H,3),dddd:H[this.$W],H:String(_),HH:f.s(_,2,"0"),h:et(1),hh:et(2),a:st(_,$,!0),A:st(_,$,!1),m:String($),mm:f.s($,2,"0"),s:String(this.$s),ss:f.s(this.$s,2,"0"),SSS:f.s(this.$ms,3,"0"),Z:i};return u.replace(J,function(F,z){return z||tt[F]||i.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,r,e){var u,i=f.p(r),_=w(t),$=(_.utcOffset()-this.utcOffset())*M,x=this-_,H=f.m(this,_);return H=(u={},u[W]=H/12,u[I]=H,u[nt]=H/3,u[B]=(x-$)/6048e5,u[O]=(x-$)/864e5,u[T]=x/A,u[y]=x/M,u[g]=x/q,u)[i]||x,e?H:f.a(H)},s.daysInMonth=function(){return this.endOf(I).$D},s.$locale=function(){return C[this.$L]},s.locale=function(t,r){if(!t)return this.$L;var e=this.clone(),u=Q(t,r,!0);return u&&(e.$L=u),e},s.clone=function(){return f.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},a}(),X=R.prototype;return w.prototype=X,[["$ms",D],["$s",g],["$m",y],["$H",T],["$W",O],["$M",I],["$y",W],["$D",j]].forEach(function(a){X[a[1]]=function(s){return this.$g(s,a[0],a[1])}}),w.extend=function(a,s){return a.$i||(a(s,R,w),a.$i=!0),w},w.locale=Q,w.isDayjs=m,w.unix=function(a){return w(1e3*a)},w.en=C[v],w.Ls=C,w.p={},w})})(ft);const it=ft.exports;function xt(N){return function(U,q){var M=parseFloat(U[N]),A=parseFloat(q[N]);return A<M?1:A>M?-1:0}}function vt(N){return N.substring(0,2)=="\\x"||N.substring(0,2)=="0x"?N.substring(2,6)+".."+N.substring(N.length-4,N.length):N}const $t={class:"m-5 text-center"},bt=ht({__name:"DataCell",props:{title:String,listLength:{type:Number,default:0}},emits:["changeCount"],setup(N,{emit:U}){const q=N,M=K(5),A=g=>{M.value+=g,U("changeCount",M)},D=()=>{M.value=5,U("changeCount",M)};return(g,y)=>{const T=E("van-cell"),O=E("van-cell-group");return k(),ut(O,{inset:"",class:"mt-5"},{default:n(()=>[l(T,{title:q.title,icon:"label-o"},{value:n(()=>[M.value>5?(k(),L("span",{key:0,onClick:y[0]||(y[0]=B=>D())},o(g.$t("common.show_only_5")),1)):P("",!0)]),_:1},8,["title"]),mt(g.$slots,"default"),p("div",$t,[M.value<q.listLength?(k(),L("span",{key:0,class:"text-gray-500",onClick:y[1]||(y[1]=B=>A(5))},o(g.$t("common.add_more")),1)):P("",!0)])]),_:3})}}}),wt={style:{width:"90%"},class:"text-gray-400 text-sm text-left"},Mt={style:{width:"90%"},class:"mt-2"},St={key:0,class:"text-orange-400 text-4xl"},kt={key:1,class:"text-fuchsia-400 text-4xl"},Dt={key:2,class:"text-blue-400 text-4xl"},Ot={key:3,class:"text-green-400 text-4xl"},Ct={key:4,class:"text-gray-400 text-4xl"},Ht={style:{width:"90%"},class:"text-left mt-1"},Nt={class:"text-gray-400 text-sm"},Lt={key:0,class:"text-black-500 text-sm ml-1"},Tt={style:{width:"90%"},class:"text-left mt-1"},Ft={class:"text-gray-400 text-sm"},It={class:"text-black-500 text-sm ml-1"},Yt={style:{width:"90%"},class:"text-left mt-1"},qt={class:"text-gray-400 text-sm"},At={class:"text-black text-sm ml-1"},Wt={style:{width:"90%"},class:"text-left mt-1"},Bt={class:"text-gray-400 text-sm"},jt={class:"text-black text-sm ml-1"},Jt={class:"text-base text-gray-400"},Vt={class:"text-base text-gray-400"},Ut={class:"text-base text-gray-400"},Rt=Y("SSSR"),Zt={class:"text-base text-block-500"},zt={class:"text-base text-slate-500"},Et=Y("SSR"),Pt={class:"text-base text-block-500"},Gt={class:"text-base text-slate-500"},Qt=Y("SR"),Kt={class:"text-base text-block-500"},Xt={class:"text-base text-slate-500"},te=Y("R"),ee={class:"text-base text-block-500"},se={class:"text-base text-slate-500"},ne=Y("N"),ae={class:"text-base text-block-500"},le={class:"text-base text-slate-500"},re={key:0,class:"text-orange-500 mr-1"},oe={key:1,class:"text-fuchsia-500 mr-1"},ie={key:2,class:"text-blue-500 mr-1"},ue={key:3,class:"text-green-500 mr-1"},ce={key:4,class:"text-grey-500 mr-1"},fe=ht({__name:"index",setup(N){const U=K(""),q=K(""),M=K(0),A=K(0),D=K(0);let g=K([]),y=ot({sssr:[],ssr:[],sr:[],r:[],n:[]}),T=null,O=ot({last:[],luck:[],bad:[]}),B=ot({last:5,luck:5,bad:5});const I=c=>B.last=c;let nt=lt.filters.OpenBox();pt(async()=>{await W()}),gt(async()=>{lt.removeAllListeners(),T&&clearInterval(T)});const W=async()=>{T&&clearInterval(T),T=setInterval(()=>{U.value=it().format("HH:mm:ss")});let c=[],G=await lt.queryFilter(nt,-3e3,"latest"),J=await dt(G);c.push(...J),j(c),lt.on("OpenBox",async(d,b,h,v,C,m,Q,w,f)=>{let R=await dt([f]);for(let X=0;X<c.length;X++)R=R.filter(a=>a.transactionHash!=c[X].transactionHash);c.push(...R),j(c)})},j=c=>{g.value=JSON.parse(JSON.stringify(c)),y.sssr=g.value.filter(h=>h.quality==5),y.ssr=g.value.filter(h=>h.quality==4),y.sr=g.value.filter(h=>h.quality==3),y.r=g.value.filter(h=>h.quality==2),y.n=g.value.filter(h=>h.quality==1);let G=-1,J=-1;c.forEach((h,v)=>{h.quality==5&&(G=v),h.quality==4&&(J=v)}),M.value=c.length-G-1,A.value=c.length-J-1;let d=.5+(.005-y.sssr.length/c.length)*40+(.025-y.ssr.length/c.length)*8+(.08-y.sr.length/c.length)*2;D.value=Number((d*100).toFixed(2));let b=c.reduce((h,v)=>{let C=-1;if(h.length&&(C=h.findIndex(function(m){return m.owner==v.owner&&m.blockNumber==v.blockNumber})),C>=0)h[C].totalnum[0]++,h[C].totalnum[v.quality]++,h[C].nfts.push(v);else{let m={owner:v.owner,totalnum:[1,0,0,0,0,0],timestamp:v.timestamp,blockNumber:v.blockNumber,nfts:[v]};m.totalnum[v.quality]++,h.push(m)}return h},[]);b=b.sort(xt("blockNumber")),O.last=b.reverse(),console.log("listArr.last.length : ",O.last.length),q.value=it.unix(b[b.length-1].timestamp).format("HH:mm")};return(c,G)=>{const J=E("van-grid-item"),d=E("van-col"),b=E("van-row"),h=E("van-tag"),v=E("van-grid"),C=E("van-cell-group");return k(),L(ct,null,[l(C,{inset:"",class:"mt-2"},{default:n(()=>[l(v,{"column-num":"2"},{default:n(()=>[l(J,{"use-slot":""},{default:n(()=>[p("div",wt,o(c.$t("callhero.heartIndex")),1),p("div",Mt,[D.value>85?(k(),L("span",St,o(D.value)+"%",1)):D.value>70?(k(),L("span",kt,o(D.value)+"%",1)):D.value>50?(k(),L("span",Dt,o(D.value)+"%",1)):D.value>30?(k(),L("span",Ot,o(D.value)+"%",1)):(k(),L("span",Ct,o(D.value)+"%",1))]),p("div",Ht,[p("span",Nt,o(c.$t("callhero.total_time"))+":",1),S(g).length?(k(),L("span",Lt,o(q.value)+"-"+o(U.value),1)):P("",!0)]),p("div",Tt,[p("span",Ft,o(c.$t("callhero.total_open"))+":",1),p("span",It,o(S(g).length),1)]),p("div",Yt,[p("span",qt,o(c.$t("callhero.no_orange"))+":",1),p("span",At,o(M.value)+"/200",1)]),p("div",Wt,[p("span",Bt,o(c.$t("callhero.no_purple"))+":",1),p("span",jt,o(A.value)+"/40",1)])]),_:1}),l(J,{"use-slot":""},{default:n(()=>[l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8",class:"text-left"},{default:n(()=>[p("span",Jt,o(c.$t("callhero.title_nft")),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Vt,o(c.$t("callhero.title_open")),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Ut,o(c.$t("callhero.title_theory")),1)]),_:1})]),_:1}),l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8"},{default:n(()=>[l(h,{color:"#ff7105"},{default:n(()=>[Rt]),_:1})]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Zt,o(S(y).sssr.length),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",zt,o((S(g).length*.005).toFixed(0)),1)]),_:1})]),_:1}),l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8"},{default:n(()=>[l(h,{color:"#9554fd"},{default:n(()=>[Et]),_:1})]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Pt,o(S(y).ssr.length),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Gt,o((S(g).length*.025).toFixed(0)),1)]),_:1})]),_:1}),l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8"},{default:n(()=>[l(h,{color:"#2d8eec"},{default:n(()=>[Qt]),_:1})]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Kt,o(S(y).sr.length),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",Xt,o((S(g).length*.12).toFixed(0)),1)]),_:1})]),_:1}),l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8"},{default:n(()=>[l(h,{color:"#10b981"},{default:n(()=>[te]),_:1})]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",ee,o(S(y).r.length),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",se,o((S(g).length*.35).toFixed(0)),1)]),_:1})]),_:1}),l(b,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[l(d,{span:"8"},{default:n(()=>[l(h,{color:"#6b7280"},{default:n(()=>[ne]),_:1})]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",ae,o(S(y).n.length),1)]),_:1}),l(d,{span:"8",class:"text-center"},{default:n(()=>[p("span",le,o((S(g).length*.5).toFixed(0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(k(),ut(bt,{title:c.$t("callhero.list_last"),listLength:S(O).last.length,onChangeCount:I,key:"last"+S(O).last.length},{default:n(()=>[l(b,{justify:"center",class:"my-2 text-center"},{default:n(()=>[l(d,{span:"4",class:"text-base text-gray-500"},{default:n(()=>[Y(o(c.$t("callhero.list_time")),1)]),_:1}),l(d,{span:"6",class:"text-base text-gray-500"},{default:n(()=>[Y(o(c.$t("callhero.list_address")),1)]),_:1}),l(d,{span:"11",class:"text-base text-gray-500"},{default:n(()=>[Y(o(c.$t("callhero.list_grades")),1)]),_:1}),l(d,{span:"3",class:"text-base text-gray-500"},{default:n(()=>[Y(o(c.$t("callhero.list_total")),1)]),_:1})]),_:1}),(k(!0),L(ct,null,yt(S(O).last.slice(0,S(B).last),(m,Q)=>(k(),ut(b,{justify:"center",class:"text-center",style:{"border-top":"thin solid #e5e7eb"},key:"last"+m.blockNumber+m.owner+Q*1e3+m.totalnum[0]},{default:n(()=>[l(d,{span:"4",class:"py-2"},{default:n(()=>[Y(o(S(it).unix(m.timestamp).format("HH:mm")),1)]),_:2},1024),l(d,{span:"6",class:"py-2"},{default:n(()=>[Y(o(S(vt)(m.owner)),1)]),_:2},1024),l(d,{span:"11",class:"py-2"},{default:n(()=>[m.totalnum[5]?(k(),L("span",re,o(m.totalnum[5])+"sssr",1)):P("",!0),m.totalnum[4]?(k(),L("span",oe,o(m.totalnum[4])+"ssr",1)):P("",!0),m.totalnum[3]?(k(),L("span",ie,o(m.totalnum[3])+"sr",1)):P("",!0),m.totalnum[2]?(k(),L("span",ue,o(m.totalnum[2])+"r",1)):P("",!0),m.totalnum[1]?(k(),L("span",ce,o(m.totalnum[1])+"n",1)):P("",!0)]),_:2},1024),l(d,{span:"3",class:"py-2"},{default:n(()=>[Y(o(m.totalnum[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["title","listLength"]))],64)}}});export{fe as default};
