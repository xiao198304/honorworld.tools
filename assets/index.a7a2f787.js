import{J as O,a0 as j,S as H,a1 as L,a2 as U,K as x,N,M as l,L as F,V as g,W as A,Y as I,P as B,$ as E,a3 as P,H as r,I as v,G as h,X as R}from"./index.058d235a.js";import{A as $,t as p}from"./nftdata.b204cf17.js";async function z(c,a){const s=new Request(c,{method:"post",headers:{"Content-Type":"application/json;charset=utf-8;"},body:JSON.stringify(a)});return await G(s)}async function G(c){const s=await(await fetch(c,{mode:"cors"})).text();return s?JSON.parse(s):{}}const K=R("test transition"),Q=O({__name:"index",setup(c){const{address:a,balance:s,isActivated:m,signer:y}=j();let f=H({nfts:[]});const{onActivated:V,onDeactivated:M,onChanged:W}=L();V(async({address:n})=>{console.log("activate: ",n),n!=""&&(f.nfts=await b())}),U(async()=>{console.log("activate: ",a.value),a.value!=""&&(f.nfts=await b())});async function T(){const n=p.NFTStaking.address,t=p.NFTStaking.abi;new E(n,t,y.value);const i=p.HeroNFT1155.address,o=p.HeroNFT1155.abi;let u=new E(i,o,y.value);P("0.001");const _=await u.balanceOf(a.value,3012);console.log("nft ",_.toString());const d=await u.safeTransferFrom(a.value,"0x30c717feC8aDBd219968Bd732bbEF216b98B24ed",3012,1,"0x00",{gasLimit:1e6});await d.wait(),console.log(d)}async function b(){let n={address:a.value,merge:!0,page:{number:1,size:20},filter:{quality:0,race:0,source:0}};const o=await z("https://service-q42yv3pc-1258577806.hk.apigw.tencentcs.com/release/",{url:"nft/inventory/list",pjson:n});return $(o.list)}const w=x(0),C=x(0),k=x(0),D=[{text:"\u5168\u90E8\u72B6\u6001",value:0},{text:"\u77FF\u6C60",value:1},{text:"\u7A7A\u95F2",value:2},{text:"\u6E38\u620F",value:3}],S=[{text:"\u5168\u90E8\u54C1\u8D28",value:0},{text:"\u666E\u901A",value:1},{text:"\u826F\u597D",value:2},{text:"\u7A00\u6709",value:3},{text:"\u53F2\u8BD7",value:4},{text:"\u4F20\u8BF4",value:5},{text:"\u795E\u8BDD",value:6}],q=[{text:"\u5168\u90E8\u79CD\u65CF",value:0},{text:"\u4EBA\u65CF",value:1},{text:"\u517D\u65CF",value:2},{text:"\u7CBE\u7075\u65CF",value:3},{text:"\u4E0D\u6B7B\u65CF",value:4}];return(n,t)=>{const i=r("van-button"),o=r("van-dropdown-item"),u=r("van-dropdown-menu"),_=r("van-sticky"),d=r("van-card");return v(),N(A,null,[l(i,{onClick:T},{default:F(()=>[K]),_:1}),l(_,{"offset-top":40},{default:F(()=>[g(m)?(v(),h(u,{key:0},{default:F(()=>[l(o,{modelValue:w.value,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value=e),options:D},null,8,["modelValue"]),l(o,{modelValue:C.value,"onUpdate:modelValue":t[1]||(t[1]=e=>C.value=e),options:S},null,8,["modelValue"]),l(o,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),options:q},null,8,["modelValue"])]),_:1})):B("",!0)]),_:1}),g(m)?(v(!0),N(A,{key:0},I(g(f).nfts,(e,J)=>(v(),h(d,{class:"m-4 border-1 border-gray-500",key:"nft"+J,num:e.amount,title:n.$t(e.name),thumb:"/static/images/"+e.code+".png"},null,8,["num","title","thumb"]))),128)):B("",!0)],64)}}});export{Q as default};
