import{c as ft,J as dt,K as E,I as S,G as lt,L as n,M as i,N as L,O as u,P,Q as _t,R as p,H as B,S as mt,T as ut,U as pt,V as gt,W as yt,X as k,Y as F,Z as vt,$ as xt}from"./index.1982d8e7.js";import{M as at,p as ct}from"./nftdata.26111408.js";import{s as $t,c as bt,a as wt}from"./function-call.a5d73f92.js";var ht={exports:{}};(function(H,J){(function(j,M){H.exports=M()})(ft,function(){var j=1e3,M=6e4,q=36e5,U="millisecond",y="second",g="minute",v="hour",D="day",I="week",N="month",et="quarter",A="year",R="date",G="Invalid Date",rt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,st=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,K={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var s=["th","st","nd","rd"],t=a%100;return"["+a+(s[(t-20)%10]||s[t]||s[0])+"]"}},d=function(a,s,t){var o=String(a);return!o||o.length>=s?a:""+Array(s+1-o.length).join(t)+a},V={s:d,z:function(a){var s=-a.utcOffset(),t=Math.abs(s),o=Math.floor(t/60),e=t%60;return(s<=0?"+":"-")+d(o,2,"0")+":"+d(e,2,"0")},m:function a(s,t){if(s.date()<t.date())return-a(t,s);var o=12*(t.year()-s.year())+(t.month()-s.month()),e=s.clone().add(o,N),l=t-e<0,r=s.clone().add(o+(l?-1:1),N);return+(-(o+(t-e)/(l?e-r:r-e))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:N,y:A,w:I,d:D,D:R,h:v,m:g,s:y,ms:U,Q:et}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},O="en",c={};c[O]=K;var w=function(a){return a instanceof Y},f=function a(s,t,o){var e;if(!s)return O;if(typeof s=="string"){var l=s.toLowerCase();c[l]&&(e=l),t&&(c[l]=t,e=l);var r=s.split("-");if(!e&&r.length>1)return a(r[0])}else{var m=s.name;c[m]=s,e=m}return!o&&e&&(O=e),e||!o&&O},_=function(a,s){if(w(a))return a.clone();var t=typeof s=="object"?s:{};return t.date=a,t.args=arguments,new Y(t)},h=V;h.l=f,h.i=w,h.w=function(a,s){return _(a,{locale:s.$L,utc:s.$u,x:s.$x,$offset:s.$offset})};var Y=function(){function a(t){this.$L=f(t.locale,null,!0),this.parse(t)}var s=a.prototype;return s.parse=function(t){this.$d=function(o){var e=o.date,l=o.utc;if(e===null)return new Date(NaN);if(h.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var r=e.match(rt);if(r){var m=r[2]-1||0,b=(r[7]||"0").substring(0,3);return l?new Date(Date.UTC(r[1],m,r[3]||1,r[4]||0,r[5]||0,r[6]||0,b)):new Date(r[1],m,r[3]||1,r[4]||0,r[5]||0,r[6]||0,b)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},s.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},s.$utils=function(){return h},s.isValid=function(){return this.$d.toString()!==G},s.isSame=function(t,o){var e=_(t);return this.startOf(o)<=e&&e<=this.endOf(o)},s.isAfter=function(t,o){return _(t)<this.startOf(o)},s.isBefore=function(t,o){return this.endOf(o)<_(t)},s.$g=function(t,o,e){return h.u(t)?this[o]:this.set(e,t)},s.unix=function(){return Math.floor(this.valueOf()/1e3)},s.valueOf=function(){return this.$d.getTime()},s.startOf=function(t,o){var e=this,l=!!h.u(o)||o,r=h.p(t),m=function(Q,T){var z=h.w(e.$u?Date.UTC(e.$y,T,Q):new Date(e.$y,T,Q),e);return l?z:z.endOf(D)},b=function(Q,T){return h.w(e.toDate()[Q].apply(e.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(T)),e)},$=this.$W,C=this.$M,Z=this.$D,W="set"+(this.$u?"UTC":"");switch(r){case A:return l?m(1,0):m(31,11);case N:return l?m(1,C):m(0,C+1);case I:var X=this.$locale().weekStart||0,tt=($<X?$+7:$)-X;return m(l?Z-tt:Z+(6-tt),C);case D:case R:return b(W+"Hours",0);case v:return b(W+"Minutes",1);case g:return b(W+"Seconds",2);case y:return b(W+"Milliseconds",3);default:return this.clone()}},s.endOf=function(t){return this.startOf(t,!1)},s.$set=function(t,o){var e,l=h.p(t),r="set"+(this.$u?"UTC":""),m=(e={},e[D]=r+"Date",e[R]=r+"Date",e[N]=r+"Month",e[A]=r+"FullYear",e[v]=r+"Hours",e[g]=r+"Minutes",e[y]=r+"Seconds",e[U]=r+"Milliseconds",e)[l],b=l===D?this.$D+(o-this.$W):o;if(l===N||l===A){var $=this.clone().set(R,1);$.$d[m](b),$.init(),this.$d=$.set(R,Math.min(this.$D,$.daysInMonth())).$d}else m&&this.$d[m](b);return this.init(),this},s.set=function(t,o){return this.clone().$set(t,o)},s.get=function(t){return this[h.p(t)]()},s.add=function(t,o){var e,l=this;t=Number(t);var r=h.p(o),m=function(C){var Z=_(l);return h.w(Z.date(Z.date()+Math.round(C*t)),l)};if(r===N)return this.set(N,this.$M+t);if(r===A)return this.set(A,this.$y+t);if(r===D)return m(1);if(r===I)return m(7);var b=(e={},e[g]=M,e[v]=q,e[y]=j,e)[r]||1,$=this.$d.getTime()+t*b;return h.w($,this)},s.subtract=function(t,o){return this.add(-1*t,o)},s.format=function(t){var o=this,e=this.$locale();if(!this.isValid())return e.invalidDate||G;var l=t||"YYYY-MM-DDTHH:mm:ssZ",r=h.z(this),m=this.$H,b=this.$m,$=this.$M,C=e.weekdays,Z=e.months,W=function(T,z,it,nt){return T&&(T[z]||T(o,l))||it[z].slice(0,nt)},X=function(T){return h.s(m%12||12,T,"0")},tt=e.meridiem||function(T,z,it){var nt=T<12?"AM":"PM";return it?nt.toLowerCase():nt},Q={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$+1,MM:h.s($+1,2,"0"),MMM:W(e.monthsShort,$,Z,3),MMMM:W(Z,$),D:this.$D,DD:h.s(this.$D,2,"0"),d:String(this.$W),dd:W(e.weekdaysMin,this.$W,C,2),ddd:W(e.weekdaysShort,this.$W,C,3),dddd:C[this.$W],H:String(m),HH:h.s(m,2,"0"),h:X(1),hh:X(2),a:tt(m,b,!0),A:tt(m,b,!1),m:String(b),mm:h.s(b,2,"0"),s:String(this.$s),ss:h.s(this.$s,2,"0"),SSS:h.s(this.$ms,3,"0"),Z:r};return l.replace(st,function(T,z){return z||Q[T]||r.replace(":","")})},s.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},s.diff=function(t,o,e){var l,r=h.p(o),m=_(t),b=(m.utcOffset()-this.utcOffset())*M,$=this-m,C=h.m(this,m);return C=(l={},l[A]=C/12,l[N]=C,l[et]=C/3,l[I]=($-b)/6048e5,l[D]=($-b)/864e5,l[v]=$/q,l[g]=$/M,l[y]=$/j,l)[r]||$,e?C:h.a(C)},s.daysInMonth=function(){return this.endOf(N).$D},s.$locale=function(){return c[this.$L]},s.locale=function(t,o){if(!t)return this.$L;var e=this.clone(),l=f(t,o,!0);return l&&(e.$L=l),e},s.clone=function(){return h.w(this.$d,this)},s.toDate=function(){return new Date(this.valueOf())},s.toJSON=function(){return this.isValid()?this.toISOString():null},s.toISOString=function(){return this.$d.toISOString()},s.toString=function(){return this.$d.toUTCString()},a}(),x=Y.prototype;return _.prototype=x,[["$ms",U],["$s",y],["$m",g],["$H",v],["$W",D],["$M",N],["$y",A],["$D",R]].forEach(function(a){x[a[1]]=function(s){return this.$g(s,a[0],a[1])}}),_.extend=function(a,s){return a.$i||(a(s,Y,_),a.$i=!0),_},_.locale=f,_.isDayjs=w,_.unix=function(a){return _(1e3*a)},_.en=c[O],_.Ls=c,_.p={},_})})(ht);const ot=ht.exports;function Mt(H){return function(J,j){var M=parseFloat(J[H]),q=parseFloat(j[H]);return q<M?1:q>M?-1:0}}function kt(H){return H.substring(0,2)=="\\x"||H.substring(0,2)=="0x"?H.substring(2,6)+".."+H.substring(H.length-4,H.length):H}const St={class:"m-5 text-center"},Dt=dt({__name:"DataCell",props:{title:String,listLength:{type:Number,default:0}},emits:["changeCount"],setup(H,{emit:J}){const j=H,M=E(5),q=y=>{M.value+=y,J("changeCount",M)},U=()=>{M.value=5,J("changeCount",M)};return(y,g)=>{const v=B("van-cell"),D=B("van-cell-group");return S(),lt(D,{inset:"",class:"mt-5"},{default:n(()=>[i(v,{title:j.title,icon:"label-o"},{value:n(()=>[M.value>5?(S(),L("span",{key:0,onClick:g[0]||(g[0]=I=>U())},u(y.$t("common.show_only_5")),1)):P("",!0)]),_:1},8,["title"]),_t(y.$slots,"default"),p("div",St,[M.value<j.listLength?(S(),L("span",{key:0,class:"text-gray-500",onClick:g[1]||(g[1]=I=>q(5))},u(y.$t("common.add_more")),1)):P("",!0)])]),_:3})}}}),Ot={style:{width:"90%"},class:"text-gray-400 text-sm text-left"},Ct={style:{width:"90%"},class:"mt-2"},Ht={key:0,class:"text-orange-400 text-4xl"},Nt={key:1,class:"text-fuchsia-400 text-4xl"},Tt={key:2,class:"text-blue-400 text-4xl"},Lt={key:3,class:"text-green-400 text-4xl"},Yt={key:4,class:"text-gray-400 text-4xl"},It={style:{width:"90%"},class:"text-left mt-1"},Ft={class:"text-gray-400 text-sm"},jt={key:0,class:"text-black-500 text-sm ml-1"},qt={style:{width:"90%"},class:"text-left mt-1"},At={class:"text-gray-400 text-sm"},Vt={class:"text-black-500 text-sm ml-1"},Wt={style:{width:"90%"},class:"text-left mt-1"},Bt={class:"text-gray-400 text-sm"},Jt={class:"text-black text-sm ml-1"},Ut={style:{width:"90%"},class:"text-left mt-1"},Rt={class:"text-gray-400 text-sm"},Zt={class:"text-black text-sm ml-1"},zt={class:"text-base text-gray-400"},Et={class:"text-base text-gray-400"},Pt={class:"text-base text-gray-400"},Gt=F("SSSR"),Qt={class:"text-base text-block-500"},Kt={class:"text-base text-slate-500"},Xt=F("SSR"),te={class:"text-base text-block-500"},ee={class:"text-base text-slate-500"},se=F("SR"),ne={class:"text-base text-block-500"},ae={class:"text-base text-slate-500"},oe=F("R"),le={class:"text-base text-block-500"},re={class:"text-base text-slate-500"},ie=F("N"),ue={class:"text-base text-block-500"},ce={class:"text-base text-slate-500"},de={key:0,class:"text-orange-500 mr-1"},he={key:1,class:"text-fuchsia-500 mr-1"},fe={key:2,class:"text-blue-500 mr-1"},_e={key:3,class:"text-green-500 mr-1"},me={key:4,class:"text-grey-500 mr-1"},ve=dt({__name:"index",setup(H){const{t:J}=mt(),j=E(""),M=E(""),q=E(0),U=E(0),y=E(0);let g=E([]),v=ut({sssr:[],ssr:[],sr:[],r:[],n:[]}),D=null,I=ut({last:[],luck:[],bad:[]}),N=ut({last:5,luck:5,bad:5});const et=d=>N.last=d,A="https://tools-1258577806.cos.ap-hongkong.myqcloud.com/honorworld/callhero/";let R=at.filters.OpenBox();const G=E(!1),rt=async()=>{await st(),wt(J("common.Refresh_succeeded")),G.value=!1};pt(async()=>{await st()}),gt(async()=>{at.removeAllListeners(),D&&clearInterval(D)});const st=async()=>{$t({duration:0,message:J("common.Updating_data")}),D&&clearInterval(D),D=setInterval(()=>{j.value=ot().format("HH:mm:ss")});let d=[],V=A+"last12.json?="+ot().format("YYYYMMDDHHMM");const O=await yt(V);O.data.length>0&&(d.push(...O.data),M.value=ot.unix(O.starttimestamp).format("HH:mm")),K(d),bt();let c=parseInt(O.endblock)+1,w=await at.queryFilter(R,c,"latest");if(w.length>0){let f=await ct(w);d.push(...f),K(d)}at.on("OpenBox",async(f,_,h,Y,x,a,s,t,o)=>{let e=await ct([o]);for(let l=0;l<d.length;l++)e=e.filter(r=>r.transactionHash!=d[l].transactionHash);d.push(...e),K(d)})},K=d=>{g.value=JSON.parse(JSON.stringify(d)),v.sssr=g.value.filter(f=>f.quality==5),v.ssr=g.value.filter(f=>f.quality==4),v.sr=g.value.filter(f=>f.quality==3),v.r=g.value.filter(f=>f.quality==2),v.n=g.value.filter(f=>f.quality==1);let V=-1,O=-1;d.forEach((f,_)=>{f.quality==5&&(V=_),f.quality==4&&(O=_)}),q.value=d.length-V-1,U.value=d.length-O-1;let c=.5+(.005-v.sssr.length/d.length)*40+(.025-v.ssr.length/d.length)*8+(.08-v.sr.length/d.length)*2;y.value=Number((c*100).toFixed(2));let w=d.reduce((f,_)=>{let h=-1;if(f.length&&(h=f.findIndex(function(Y){return Y.owner==_.owner&&Y.blockNumber==_.blockNumber})),h>=0)f[h].totalnum[0]++,f[h].totalnum[_.quality]++,f[h].nfts.push(_);else{let Y={owner:_.owner,totalnum:[1,0,0,0,0,0],timestamp:_.timestamp,blockNumber:_.blockNumber,nfts:[_]};Y.totalnum[_.quality]++,f.push(Y)}return f},[]);w=w.sort(Mt("blockNumber")),I.last=w.reverse(),console.log("listArr.last.length : ",I.last.length)};return(d,V)=>{const O=B("van-grid-item"),c=B("van-col"),w=B("van-row"),f=B("van-tag"),_=B("van-grid"),h=B("van-cell-group"),Y=B("van-pull-refresh");return S(),lt(Y,{modelValue:G.value,"onUpdate:modelValue":V[0]||(V[0]=x=>G.value=x),onRefresh:rt},{default:n(()=>[i(h,{inset:"",class:"mt-2"},{default:n(()=>[i(_,{"column-num":"2"},{default:n(()=>[i(O,{"use-slot":""},{default:n(()=>[p("div",Ot,u(d.$t("callhero.heartIndex")),1),p("div",Ct,[y.value>85?(S(),L("span",Ht,u(y.value)+"%",1)):y.value>70?(S(),L("span",Nt,u(y.value)+"%",1)):y.value>50?(S(),L("span",Tt,u(y.value)+"%",1)):y.value>30?(S(),L("span",Lt,u(y.value)+"%",1)):(S(),L("span",Yt,u(y.value)+"%",1))]),p("div",It,[p("span",Ft,u(d.$t("callhero.total_time"))+":",1),k(g).length?(S(),L("span",jt,u(M.value)+"-"+u(j.value),1)):P("",!0)]),p("div",qt,[p("span",At,u(d.$t("callhero.total_open"))+":",1),p("span",Vt,u(k(g).length),1)]),p("div",Wt,[p("span",Bt,u(d.$t("callhero.no_orange"))+":",1),p("span",Jt,u(q.value)+"/200",1)]),p("div",Ut,[p("span",Rt,u(d.$t("callhero.no_purple"))+":",1),p("span",Zt,u(U.value)+"/40",1)])]),_:1}),i(O,{"use-slot":""},{default:n(()=>[i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8",class:"text-left"},{default:n(()=>[p("span",zt,u(d.$t("callhero.title_nft")),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",Et,u(d.$t("callhero.title_open")),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",Pt,u(d.$t("callhero.title_theory")),1)]),_:1})]),_:1}),i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8"},{default:n(()=>[i(f,{color:"#ff7105"},{default:n(()=>[Gt]),_:1})]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",Qt,u(k(v).sssr.length),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",Kt,u((k(g).length*.005).toFixed(0)),1)]),_:1})]),_:1}),i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8"},{default:n(()=>[i(f,{color:"#9554fd"},{default:n(()=>[Xt]),_:1})]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",te,u(k(v).ssr.length),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",ee,u((k(g).length*.025).toFixed(0)),1)]),_:1})]),_:1}),i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8"},{default:n(()=>[i(f,{color:"#2d8eec"},{default:n(()=>[se]),_:1})]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",ne,u(k(v).sr.length),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",ae,u((k(g).length*.12).toFixed(0)),1)]),_:1})]),_:1}),i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8"},{default:n(()=>[i(f,{color:"#10b981"},{default:n(()=>[oe]),_:1})]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",le,u(k(v).r.length),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",re,u((k(g).length*.35).toFixed(0)),1)]),_:1})]),_:1}),i(w,{style:{width:"90%"},justify:"space-between",class:"mt-1"},{default:n(()=>[i(c,{span:"8"},{default:n(()=>[i(f,{color:"#6b7280"},{default:n(()=>[ie]),_:1})]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",ue,u(k(v).n.length),1)]),_:1}),i(c,{span:"8",class:"text-center"},{default:n(()=>[p("span",ce,u((k(g).length*.5).toFixed(0)),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(S(),lt(Dt,{title:d.$t("callhero.list_last"),listLength:k(I).last.length,onChangeCount:et,key:"last"+k(I).last.length},{default:n(()=>[i(w,{justify:"center",class:"my-2 text-center"},{default:n(()=>[i(c,{span:"4",class:"text-base text-gray-500"},{default:n(()=>[F(u(d.$t("callhero.list_time")),1)]),_:1}),i(c,{span:"6",class:"text-base text-gray-500"},{default:n(()=>[F(u(d.$t("callhero.list_address")),1)]),_:1}),i(c,{span:"11",class:"text-base text-gray-500"},{default:n(()=>[F(u(d.$t("callhero.list_grades")),1)]),_:1}),i(c,{span:"3",class:"text-base text-gray-500"},{default:n(()=>[F(u(d.$t("callhero.list_total")),1)]),_:1})]),_:1}),(S(!0),L(xt,null,vt(k(I).last.slice(0,k(N).last),(x,a)=>(S(),lt(w,{justify:"center",class:"text-center",style:{"border-top":"thin solid #e5e7eb"},key:"last"+x.blockNumber+x.owner+a*1e3+x.totalnum[0]},{default:n(()=>[i(c,{span:"4",class:"py-2"},{default:n(()=>[F(u(k(ot).unix(x.timestamp).format("HH:mm")),1)]),_:2},1024),i(c,{span:"6",class:"py-2"},{default:n(()=>[F(u(k(kt)(x.owner)),1)]),_:2},1024),i(c,{span:"11",class:"py-2"},{default:n(()=>[x.totalnum[5]?(S(),L("span",de,u(x.totalnum[5])+"sssr",1)):P("",!0),x.totalnum[4]?(S(),L("span",he,u(x.totalnum[4])+"ssr",1)):P("",!0),x.totalnum[3]?(S(),L("span",fe,u(x.totalnum[3])+"sr",1)):P("",!0),x.totalnum[2]?(S(),L("span",_e,u(x.totalnum[2])+"r",1)):P("",!0),x.totalnum[1]?(S(),L("span",me,u(x.totalnum[1])+"n",1)):P("",!0)]),_:2},1024),i(c,{span:"3",class:"py-2"},{default:n(()=>[F(u(x.totalnum[0]),1)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["title","listLength"]))]),_:1},8,["modelValue"])}}});export{ve as default};
